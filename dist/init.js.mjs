import O from"node:fs";import C from"node:path";import{fileURLToPath as ae}from"node:url";import he from"readline";import ue from"events";let U=!0;const W=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let Mt=0;if(W.process&&W.process.env&&W.process.stdout){const{FORCE_COLOR:s,NODE_DISABLE_COLORS:t,TERM:e}=W.process.env;t||s==="0"?U=!1:s==="1"?U=!0:e==="dumb"?U=!1:"CI"in W.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(i=>i in W.process.env)?U=!0:U=process.stdout.isTTY,U&&(Mt=e&&e.endsWith("-256color")?2:1)}let Ot={enabled:U,supportLevel:Mt};function z(s,t,e=1){const i=`\x1B[${s}m`,n=`\x1B[${t}m`,o=new RegExp(`\\x1b\\[${t}m`,"g");return r=>Ot.enabled&&Ot.supportLevel>=e?i+(""+r).replace(o,i)+n:""+r}const Q=z(0,0),j=z(31,39),N=z(32,39),V=z(33,39),G=z(34,39),Y=z(35,39),K=z(36,39);var ce=function(s,t){t||(t={});var e={bools:{},strings:{},unknownFn:null};typeof t.unknown=="function"&&(e.unknownFn=t.unknown),typeof t.boolean=="boolean"&&t.boolean?e.allBools=!0:[].concat(t.boolean).filter(Boolean).forEach(function(u){e.bools[u]=!0});var i={};Object.keys(t.alias||{}).forEach(function(u){i[u]=[].concat(t.alias[u]),i[u].forEach(function(S){i[S]=[u].concat(i[u].filter(function(k){return S!==k}))})}),[].concat(t.string).filter(Boolean).forEach(function(u){e.strings[u]=!0,i[u]&&(e.strings[i[u]]=!0)});var n=t.default||{},o={_:[]};Object.keys(e.bools).forEach(function(u){c(u,n[u]===void 0?!1:n[u])});var r=[];s.indexOf("--")!==-1&&(r=s.slice(s.indexOf("--")+1),s=s.slice(0,s.indexOf("--")));function l(u,S){return e.allBools&&/^--[^=]+$/.test(S)||e.strings[u]||e.bools[u]||i[u]}function c(u,S,k){if(!(k&&e.unknownFn&&!l(u,k)&&e.unknownFn(k)===!1)){var m=!e.strings[u]&&Tt(S)?Number(S):S;d(o,u.split("."),m),(i[u]||[]).forEach(function(X){d(o,X.split("."),m)})}}function d(u,S,k){for(var m=u,X=0;X<S.length-1;X++){var $=S[X];if(Ct(m,$))return;m[$]===void 0&&(m[$]={}),(m[$]===Object.prototype||m[$]===Number.prototype||m[$]===String.prototype)&&(m[$]={}),m[$]===Array.prototype&&(m[$]=[]),m=m[$]}var $=S[S.length-1];Ct(m,$)||((m===Object.prototype||m===Number.prototype||m===String.prototype)&&(m={}),m===Array.prototype&&(m=[]),m[$]===void 0||e.bools[$]||typeof m[$]=="boolean"?m[$]=k:Array.isArray(m[$])?m[$].push(k):m[$]=[m[$],k])}function _(u){return i[u].some(function(S){return e.bools[S]})}for(var g=0;g<s.length;g++){var a=s[g];if(/^--.+=/.test(a)){var x=a.match(/^--([^=]+)=([\s\S]*)$/),p=x[1],T=x[2];e.bools[p]&&(T=T!=="false"),c(p,T,a)}else if(/^--no-.+/.test(a)){var p=a.match(/^--no-(.+)/)[1];c(p,!1,a)}else if(/^--.+/.test(a)){var p=a.match(/^--(.+)/)[1],M=s[g+1];M!==void 0&&!/^-/.test(M)&&!e.bools[p]&&!e.allBools&&(i[p]?!_(p):!0)?(c(p,M,a),g++):/^(true|false)$/.test(M)?(c(p,M==="true",a),g++):c(p,e.strings[p]?"":!0,a)}else if(/^-[^-]+/.test(a)){for(var h=a.slice(1,-1).split(""),v=!1,w=0;w<h.length;w++){var M=a.slice(w+2);if(M==="-"){c(h[w],M,a);continue}if(/[A-Za-z]/.test(h[w])&&/=/.test(M)){c(h[w],M.split("=")[1],a),v=!0;break}if(/[A-Za-z]/.test(h[w])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(M)){c(h[w],M,a),v=!0;break}if(h[w+1]&&h[w+1].match(/\W/)){c(h[w],a.slice(w+2),a),v=!0;break}else c(h[w],e.strings[h[w]]?"":!0,a)}var p=a.slice(-1)[0];!v&&p!=="-"&&(s[g+1]&&!/^(-|--)[^-]/.test(s[g+1])&&!e.bools[p]&&(i[p]?!_(p):!0)?(c(p,s[g+1],a),g++):s[g+1]&&/^(true|false)$/.test(s[g+1])?(c(p,s[g+1]==="true",a),g++):c(p,e.strings[p]?"":!0,a))}else if((!e.unknownFn||e.unknownFn(a)!==!1)&&o._.push(e.strings._||!Tt(a)?a:Number(a)),t.stopEarly){o._.push.apply(o._,s.slice(g+1));break}}return Object.keys(n).forEach(function(u){de(o,u.split("."))||(d(o,u.split("."),n[u]),(i[u]||[]).forEach(function(S){d(o,S.split("."),n[u])}))}),t["--"]?(o["--"]=new Array,r.forEach(function(u){o["--"].push(u)})):r.forEach(function(u){o._.push(u)}),o};function de(s,t){var e=s;t.slice(0,-1).forEach(function(n){e=e[n]||{}});var i=t[t.length-1];return i in e}function Tt(s){return typeof s=="number"||/^0x[0-9a-f]+$/i.test(s)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(s)}function Ct(s,t){return t==="constructor"&&typeof s[t]=="function"||t==="__proto__"}var Pt={};const{FORCE_COLOR:fe,NODE_DISABLE_COLORS:pe,TERM:me}=process.env,f={enabled:!pe&&me!=="dumb"&&fe!=="0",reset:b(0,0),bold:b(1,22),dim:b(2,22),italic:b(3,23),underline:b(4,24),inverse:b(7,27),hidden:b(8,28),strikethrough:b(9,29),black:b(30,39),red:b(31,39),green:b(32,39),yellow:b(33,39),blue:b(34,39),magenta:b(35,39),cyan:b(36,39),white:b(37,39),gray:b(90,39),grey:b(90,39),bgBlack:b(40,49),bgRed:b(41,49),bgGreen:b(42,49),bgYellow:b(43,49),bgBlue:b(44,49),bgMagenta:b(45,49),bgCyan:b(46,49),bgWhite:b(47,49)};function Dt(s,t){let e=0,i,n="",o="";for(;e<s.length;e++)i=s[e],n+=i.open,o+=i.close,t.includes(i.close)&&(t=t.replace(i.rgx,i.close+i.open));return n+t+o}function ge(s,t){let e={has:s,keys:t};return e.reset=f.reset.bind(e),e.bold=f.bold.bind(e),e.dim=f.dim.bind(e),e.italic=f.italic.bind(e),e.underline=f.underline.bind(e),e.inverse=f.inverse.bind(e),e.hidden=f.hidden.bind(e),e.strikethrough=f.strikethrough.bind(e),e.black=f.black.bind(e),e.red=f.red.bind(e),e.green=f.green.bind(e),e.yellow=f.yellow.bind(e),e.blue=f.blue.bind(e),e.magenta=f.magenta.bind(e),e.cyan=f.cyan.bind(e),e.white=f.white.bind(e),e.gray=f.gray.bind(e),e.grey=f.grey.bind(e),e.bgBlack=f.bgBlack.bind(e),e.bgRed=f.bgRed.bind(e),e.bgGreen=f.bgGreen.bind(e),e.bgYellow=f.bgYellow.bind(e),e.bgBlue=f.bgBlue.bind(e),e.bgMagenta=f.bgMagenta.bind(e),e.bgCyan=f.bgCyan.bind(e),e.bgWhite=f.bgWhite.bind(e),e}function b(s,t){let e={open:`\x1B[${s}m`,close:`\x1B[${t}m`,rgx:new RegExp(`\\x1b\\[${t}m`,"g")};return function(i){return this!==void 0&&this.has!==void 0?(this.has.includes(s)||(this.has.push(s),this.keys.push(e)),i===void 0?this:f.enabled?Dt(this.keys,i+""):i+""):i===void 0?ge([s],[e]):f.enabled?Dt([e],i+""):i+""}}var P=f,ve=(s,t)=>{if(!(s.meta&&s.name!=="escape")){if(s.ctrl){if(s.name==="a")return"first";if(s.name==="c"||s.name==="d")return"abort";if(s.name==="e")return"last";if(s.name==="g")return"reset"}if(t){if(s.name==="j")return"down";if(s.name==="k")return"up"}return s.name==="return"||s.name==="enter"?"submit":s.name==="backspace"?"delete":s.name==="delete"?"deleteForward":s.name==="abort"?"abort":s.name==="escape"?"exit":s.name==="tab"?"next":s.name==="pagedown"?"nextPage":s.name==="pageup"?"prevPage":s.name==="home"?"home":s.name==="end"?"end":s.name==="up"?"up":s.name==="down"?"down":s.name==="right"?"right":s.name==="left"?"left":!1}},ht=s=>{const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|"),e=new RegExp(t,"g");return typeof s=="string"?s.replace(e,""):s};const ut="\x1B",y=`${ut}[`,be="\x07",ct={to(s,t){return t?`${y}${t+1};${s+1}H`:`${y}${s+1}G`},move(s,t){let e="";return s<0?e+=`${y}${-s}D`:s>0&&(e+=`${y}${s}C`),t<0?e+=`${y}${-t}A`:t>0&&(e+=`${y}${t}B`),e},up:(s=1)=>`${y}${s}A`,down:(s=1)=>`${y}${s}B`,forward:(s=1)=>`${y}${s}C`,backward:(s=1)=>`${y}${s}D`,nextLine:(s=1)=>`${y}E`.repeat(s),prevLine:(s=1)=>`${y}F`.repeat(s),left:`${y}G`,hide:`${y}?25l`,show:`${y}?25h`,save:`${ut}7`,restore:`${ut}8`},ye={up:(s=1)=>`${y}S`.repeat(s),down:(s=1)=>`${y}T`.repeat(s)},we={screen:`${y}2J`,up:(s=1)=>`${y}1J`.repeat(s),down:(s=1)=>`${y}J`.repeat(s),line:`${y}2K`,lineEnd:`${y}K`,lineStart:`${y}1K`,lines(s){let t="";for(let e=0;e<s;e++)t+=this.line+(e<s-1?ct.up():"");return s&&(t+=ct.left),t}};var D={cursor:ct,scroll:ye,erase:we,beep:be};const $e=ht,{erase:It,cursor:Se}=D,xe=s=>[...$e(s)].length;var Me=function(s,t){if(!t)return It.line+Se.to(0);let e=0;const i=s.split(/\r?\n/);for(let n of i)e+=1+Math.floor(Math.max(xe(n)-1,0)/t);return It.lines(e)};const tt={arrowUp:"\u2191",arrowDown:"\u2193",arrowLeft:"\u2190",arrowRight:"\u2192",radioOn:"\u25C9",radioOff:"\u25EF",tick:"\u2714",cross:"\u2716",ellipsis:"\u2026",pointerSmall:"\u203A",line:"\u2500",pointer:"\u276F"},Oe={arrowUp:tt.arrowUp,arrowDown:tt.arrowDown,arrowLeft:tt.arrowLeft,arrowRight:tt.arrowRight,radioOn:"(*)",radioOff:"( )",tick:"\u221A",cross:"\xD7",ellipsis:"...",pointerSmall:"\xBB",line:"\u2500",pointer:">"},Te=process.platform==="win32"?Oe:tt;var Et=Te;const Z=P,J=Et,dt=Object.freeze({password:{scale:1,render:s=>"*".repeat(s.length)},emoji:{scale:2,render:s=>"\u{1F603}".repeat(s.length)},invisible:{scale:0,render:s=>""},default:{scale:1,render:s=>`${s}`}}),Ce=s=>dt[s]||dt.default,et=Object.freeze({aborted:Z.red(J.cross),done:Z.green(J.tick),exited:Z.yellow(J.cross),default:Z.cyan("?")}),Pe=(s,t,e)=>t?et.aborted:e?et.exited:s?et.done:et.default,De=s=>Z.gray(s?J.ellipsis:J.pointerSmall),Ie=(s,t)=>Z.gray(s?t?J.pointerSmall:"+":J.line);var Ee={styles:dt,render:Ce,symbols:et,symbol:Pe,delimiter:De,item:Ie};const _e=ht;var ke=function(s,t){let e=String(_e(s)||"").split(/\r?\n/);return t?e.map(i=>Math.ceil(i.length/t)).reduce((i,n)=>i+n):e.length},Re=(s,t={})=>{const e=Number.isSafeInteger(parseInt(t.margin))?new Array(parseInt(t.margin)).fill(" ").join(""):t.margin||"",i=t.width;return(s||"").split(/\r?\n/g).map(n=>n.split(/\s+/g).reduce((o,r)=>(r.length+e.length>=i||o[o.length-1].length+r.length+1<i?o[o.length-1]+=` ${r}`:o.push(`${e}${r}`),o),[e]).join(`
`)).join(`
`)},Ae=(s,t,e)=>{e=e||t;let i=Math.min(t-e,s-Math.floor(e/2));i<0&&(i=0);let n=Math.min(i+e,t);return{startIndex:i,endIndex:n}},I={action:ve,clear:Me,style:Ee,strip:ht,figures:Et,lines:ke,wrap:Re,entriesToDisplay:Ae};const _t=he,{action:Fe}=I,je=ue,{beep:Ne,cursor:Ve}=D,Ye=P;let Le=class extends je{constructor(t={}){super(),this.firstRender=!0,this.in=t.stdin||process.stdin,this.out=t.stdout||process.stdout,this.onRender=(t.onRender||(()=>{})).bind(this);const e=_t.createInterface({input:this.in,escapeCodeTimeout:50});_t.emitKeypressEvents(this.in,e),this.in.isTTY&&this.in.setRawMode(!0);const i=["SelectPrompt","MultiselectPrompt"].indexOf(this.constructor.name)>-1,n=(o,r)=>{let l=Fe(r,i);l===!1?this._&&this._(o,r):typeof this[l]=="function"?this[l](r):this.bell()};this.close=()=>{this.out.write(Ve.show),this.in.removeListener("keypress",n),this.in.isTTY&&this.in.setRawMode(!1),e.close(),this.emit(this.aborted?"abort":this.exited?"exit":"submit",this.value),this.closed=!0},this.in.on("keypress",n)}fire(){this.emit("state",{value:this.value,aborted:!!this.aborted,exited:!!this.exited})}bell(){this.out.write(Ne)}render(){this.onRender(Ye),this.firstRender&&(this.firstRender=!1)}};var L=Le;const rt=P,He=L,{erase:Be,cursor:st}=D,{style:ft,clear:pt,lines:Ue,figures:ze}=I;class Je extends He{constructor(t={}){super(t),this.transform=ft.render(t.style),this.scale=this.transform.scale,this.msg=t.message,this.initial=t.initial||"",this.validator=t.validate||(()=>!0),this.value="",this.errorMsg=t.error||"Please Enter A Valid Value",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.clear=pt("",this.out.columns),this.render()}set value(t){!t&&this.initial?(this.placeholder=!0,this.rendered=rt.gray(this.transform.render(this.initial))):(this.placeholder=!1,this.rendered=this.transform.render(t)),this._value=t,this.fire()}get value(){return this._value}reset(){this.value="",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.fire(),this.render()}exit(){this.abort()}abort(){this.value=this.value||this.initial,this.done=this.aborted=!0,this.error=!1,this.red=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let t=await this.validator(this.value);typeof t=="string"&&(this.errorMsg=t,t=!1),this.error=!t}async submit(){if(this.value=this.value||this.initial,this.cursorOffset=0,this.cursor=this.rendered.length,await this.validate(),this.error){this.red=!0,this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}next(){if(!this.placeholder)return this.bell();this.value=this.initial,this.cursor=this.rendered.length,this.fire(),this.render()}moveCursor(t){this.placeholder||(this.cursor=this.cursor+t,this.cursorOffset+=t)}_(t,e){let i=this.value.slice(0,this.cursor),n=this.value.slice(this.cursor);this.value=`${i}${t}${n}`,this.red=!1,this.cursor=this.placeholder?0:i.length+1,this.render()}delete(){if(this.isCursorAtStart())return this.bell();let t=this.value.slice(0,this.cursor-1),e=this.value.slice(this.cursor);this.value=`${t}${e}`,this.red=!1,this.isCursorAtStart()?this.cursorOffset=0:(this.cursorOffset++,this.moveCursor(-1)),this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();let t=this.value.slice(0,this.cursor),e=this.value.slice(this.cursor+1);this.value=`${t}${e}`,this.red=!1,this.isCursorAtEnd()?this.cursorOffset=0:this.cursorOffset++,this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length,this.render()}left(){if(this.cursor<=0||this.placeholder)return this.bell();this.moveCursor(-1),this.render()}right(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();this.moveCursor(1),this.render()}isCursorAtStart(){return this.cursor===0||this.placeholder&&this.cursor===1}isCursorAtEnd(){return this.cursor===this.rendered.length||this.placeholder&&this.cursor===this.rendered.length+1}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(st.down(Ue(this.outputError,this.out.columns)-1)+pt(this.outputError,this.out.columns)),this.out.write(pt(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[ft.symbol(this.done,this.aborted),rt.bold(this.msg),ft.delimiter(this.done),this.red?rt.red(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((t,e,i)=>t+`
${i?" ":ze.pointerSmall} ${rt.red().italic(e)}`,"")),this.out.write(Be.line+st.to(0)+this.outputText+st.save+this.outputError+st.restore+st.move(this.cursorOffset,0)))}}var We=Je;const R=P,Ge=L,{style:kt,clear:Rt,figures:nt,wrap:Ke,entriesToDisplay:Ze}=I,{cursor:qe}=D;class Xe extends Ge{constructor(t={}){super(t),this.msg=t.message,this.hint=t.hint||"- Use arrow-keys. Return to submit.",this.warn=t.warn||"- This option is disabled",this.cursor=t.initial||0,this.choices=t.choices.map((e,i)=>(typeof e=="string"&&(e={title:e,value:i}),{title:e&&(e.title||e.value||e),value:e&&(e.value===void 0?i:e.value),description:e&&e.description,selected:e&&e.selected,disabled:e&&e.disabled})),this.optionsPerPage=t.optionsPerPage||10,this.value=(this.choices[this.cursor]||{}).value,this.clear=Rt("",this.out.columns),this.render()}moveCursor(t){this.cursor=t,this.value=this.choices[t].value,this.fire()}reset(){this.moveCursor(0),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.selection.disabled?this.bell():(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.moveCursor(0),this.render()}last(){this.moveCursor(this.choices.length-1),this.render()}up(){this.cursor===0?this.moveCursor(this.choices.length-1):this.moveCursor(this.cursor-1),this.render()}down(){this.cursor===this.choices.length-1?this.moveCursor(0):this.moveCursor(this.cursor+1),this.render()}next(){this.moveCursor((this.cursor+1)%this.choices.length),this.render()}_(t,e){if(t===" ")return this.submit()}get selection(){return this.choices[this.cursor]}render(){if(this.closed)return;this.firstRender?this.out.write(qe.hide):this.out.write(Rt(this.outputText,this.out.columns)),super.render();let{startIndex:t,endIndex:e}=Ze(this.cursor,this.choices.length,this.optionsPerPage);if(this.outputText=[kt.symbol(this.done,this.aborted),R.bold(this.msg),kt.delimiter(!1),this.done?this.selection.title:this.selection.disabled?R.yellow(this.warn):R.gray(this.hint)].join(" "),!this.done){this.outputText+=`
`;for(let i=t;i<e;i++){let n,o,r="",l=this.choices[i];i===t&&t>0?o=nt.arrowUp:i===e-1&&e<this.choices.length?o=nt.arrowDown:o=" ",l.disabled?(n=this.cursor===i?R.gray().underline(l.title):R.strikethrough().gray(l.title),o=(this.cursor===i?R.bold().gray(nt.pointer)+" ":"  ")+o):(n=this.cursor===i?R.cyan().underline(l.title):l.title,o=(this.cursor===i?R.cyan(nt.pointer)+" ":"  ")+o,l.description&&this.cursor===i&&(r=` - ${l.description}`,(o.length+n.length+r.length>=this.out.columns||l.description.split(/\r?\n/).length>1)&&(r=`
`+Ke(l.description,{margin:3,width:this.out.columns})))),this.outputText+=`${o} ${n}${R.gray(r)}
`}}this.out.write(this.outputText)}}var Qe=Xe;const ot=P,ts=L,{style:At,clear:es}=I,{cursor:Ft,erase:ss}=D;class is extends ts{constructor(t={}){super(t),this.msg=t.message,this.value=!!t.initial,this.active=t.active||"on",this.inactive=t.inactive||"off",this.initialValue=this.value,this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}deactivate(){if(this.value===!1)return this.bell();this.value=!1,this.render()}activate(){if(this.value===!0)return this.bell();this.value=!0,this.render()}delete(){this.deactivate()}left(){this.deactivate()}right(){this.activate()}down(){this.deactivate()}up(){this.activate()}next(){this.value=!this.value,this.fire(),this.render()}_(t,e){if(t===" ")this.value=!this.value;else if(t==="1")this.value=!0;else if(t==="0")this.value=!1;else return this.bell();this.render()}render(){this.closed||(this.firstRender?this.out.write(Ft.hide):this.out.write(es(this.outputText,this.out.columns)),super.render(),this.outputText=[At.symbol(this.done,this.aborted),ot.bold(this.msg),At.delimiter(this.done),this.value?this.inactive:ot.cyan().underline(this.inactive),ot.gray("/"),this.value?ot.cyan().underline(this.active):this.active].join(" "),this.out.write(ss.line+Ft.to(0)+this.outputText))}}var rs=is;let mt=class{constructor({token:t,date:e,parts:i,locales:n}){this.token=t,this.date=e||new Date,this.parts=i||[this],this.locales=n||{}}up(){}down(){}next(){const t=this.parts.indexOf(this);return this.parts.find((e,i)=>i>t&&e instanceof mt)}setTo(t){}prev(){let t=[].concat(this.parts).reverse();const e=t.indexOf(this);return t.find((i,n)=>n>e&&i instanceof mt)}toString(){return String(this.date)}};var A=mt;const ns=A;let os=class extends ns{constructor(t={}){super(t)}up(){this.date.setHours((this.date.getHours()+12)%24)}down(){this.up()}toString(){let t=this.date.getHours()>12?"pm":"am";return/\A/.test(this.token)?t.toUpperCase():t}};var ls=os;const as=A,hs=s=>(s=s%10,s===1?"st":s===2?"nd":s===3?"rd":"th");let us=class extends as{constructor(t={}){super(t)}up(){this.date.setDate(this.date.getDate()+1)}down(){this.date.setDate(this.date.getDate()-1)}setTo(t){this.date.setDate(parseInt(t.substr(-2)))}toString(){let t=this.date.getDate(),e=this.date.getDay();return this.token==="DD"?String(t).padStart(2,"0"):this.token==="Do"?t+hs(t):this.token==="d"?e+1:this.token==="ddd"?this.locales.weekdaysShort[e]:this.token==="dddd"?this.locales.weekdays[e]:t}};var cs=us;const ds=A;let fs=class extends ds{constructor(t={}){super(t)}up(){this.date.setHours(this.date.getHours()+1)}down(){this.date.setHours(this.date.getHours()-1)}setTo(t){this.date.setHours(parseInt(t.substr(-2)))}toString(){let t=this.date.getHours();return/h/.test(this.token)&&(t=t%12||12),this.token.length>1?String(t).padStart(2,"0"):t}};var ps=fs;const ms=A;let gs=class extends ms{constructor(t={}){super(t)}up(){this.date.setMilliseconds(this.date.getMilliseconds()+1)}down(){this.date.setMilliseconds(this.date.getMilliseconds()-1)}setTo(t){this.date.setMilliseconds(parseInt(t.substr(-this.token.length)))}toString(){return String(this.date.getMilliseconds()).padStart(4,"0").substr(0,this.token.length)}};var vs=gs;const bs=A;let ys=class extends bs{constructor(t={}){super(t)}up(){this.date.setMinutes(this.date.getMinutes()+1)}down(){this.date.setMinutes(this.date.getMinutes()-1)}setTo(t){this.date.setMinutes(parseInt(t.substr(-2)))}toString(){let t=this.date.getMinutes();return this.token.length>1?String(t).padStart(2,"0"):t}};var ws=ys;const $s=A;let Ss=class extends $s{constructor(t={}){super(t)}up(){this.date.setMonth(this.date.getMonth()+1)}down(){this.date.setMonth(this.date.getMonth()-1)}setTo(t){t=parseInt(t.substr(-2))-1,this.date.setMonth(t<0?0:t)}toString(){let t=this.date.getMonth(),e=this.token.length;return e===2?String(t+1).padStart(2,"0"):e===3?this.locales.monthsShort[t]:e===4?this.locales.months[t]:String(t+1)}};var xs=Ss;const Ms=A;let Os=class extends Ms{constructor(t={}){super(t)}up(){this.date.setSeconds(this.date.getSeconds()+1)}down(){this.date.setSeconds(this.date.getSeconds()-1)}setTo(t){this.date.setSeconds(parseInt(t.substr(-2)))}toString(){let t=this.date.getSeconds();return this.token.length>1?String(t).padStart(2,"0"):t}};var Ts=Os;const Cs=A;let Ps=class extends Cs{constructor(t={}){super(t)}up(){this.date.setFullYear(this.date.getFullYear()+1)}down(){this.date.setFullYear(this.date.getFullYear()-1)}setTo(t){this.date.setFullYear(t.substr(-4))}toString(){let t=String(this.date.getFullYear()).padStart(4,"0");return this.token.length===2?t.substr(-2):t}};var Ds=Ps,Is={DatePart:A,Meridiem:ls,Day:cs,Hours:ps,Milliseconds:vs,Minutes:ws,Month:xs,Seconds:Ts,Year:Ds};const gt=P,Es=L,{style:jt,clear:Nt,figures:_s}=I,{erase:ks,cursor:Vt}=D,{DatePart:Yt,Meridiem:Rs,Day:As,Hours:Fs,Milliseconds:js,Minutes:Ns,Month:Vs,Seconds:Ys,Year:Ls}=Is,Hs=/\\(.)|"((?:\\["\\]|[^"])+)"|(D[Do]?|d{3,4}|d)|(M{1,4})|(YY(?:YY)?)|([aA])|([Hh]{1,2})|(m{1,2})|(s{1,2})|(S{1,4})|./g,Lt={1:({token:s})=>s.replace(/\\(.)/g,"$1"),2:s=>new As(s),3:s=>new Vs(s),4:s=>new Ls(s),5:s=>new Rs(s),6:s=>new Fs(s),7:s=>new Ns(s),8:s=>new Ys(s),9:s=>new js(s)},Bs={months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")};class Us extends Es{constructor(t={}){super(t),this.msg=t.message,this.cursor=0,this.typed="",this.locales=Object.assign(Bs,t.locales),this._date=t.initial||new Date,this.errorMsg=t.error||"Please Enter A Valid Value",this.validator=t.validate||(()=>!0),this.mask=t.mask||"YYYY-MM-DD HH:mm:ss",this.clear=Nt("",this.out.columns),this.render()}get value(){return this.date}get date(){return this._date}set date(t){t&&this._date.setTime(t.getTime())}set mask(t){let e;for(this.parts=[];e=Hs.exec(t);){let n=e.shift(),o=e.findIndex(r=>r!=null);this.parts.push(o in Lt?Lt[o]({token:e[o]||n,date:this.date,parts:this.parts,locales:this.locales}):e[o]||n)}let i=this.parts.reduce((n,o)=>(typeof o=="string"&&typeof n[n.length-1]=="string"?n[n.length-1]+=o:n.push(o),n),[]);this.parts.splice(0),this.parts.push(...i),this.reset()}moveCursor(t){this.typed="",this.cursor=t,this.fire()}reset(){this.moveCursor(this.parts.findIndex(t=>t instanceof Yt)),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let t=await this.validator(this.value);typeof t=="string"&&(this.errorMsg=t,t=!1),this.error=!t}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){this.typed="",this.parts[this.cursor].up(),this.render()}down(){this.typed="",this.parts[this.cursor].down(),this.render()}left(){let t=this.parts[this.cursor].prev();if(t==null)return this.bell();this.moveCursor(this.parts.indexOf(t)),this.render()}right(){let t=this.parts[this.cursor].next();if(t==null)return this.bell();this.moveCursor(this.parts.indexOf(t)),this.render()}next(){let t=this.parts[this.cursor].next();this.moveCursor(t?this.parts.indexOf(t):this.parts.findIndex(e=>e instanceof Yt)),this.render()}_(t){/\d/.test(t)&&(this.typed+=t,this.parts[this.cursor].setTo(this.typed),this.render())}render(){this.closed||(this.firstRender?this.out.write(Vt.hide):this.out.write(Nt(this.outputText,this.out.columns)),super.render(),this.outputText=[jt.symbol(this.done,this.aborted),gt.bold(this.msg),jt.delimiter(!1),this.parts.reduce((t,e,i)=>t.concat(i===this.cursor&&!this.done?gt.cyan().underline(e.toString()):e),[]).join("")].join(" "),this.error&&(this.outputText+=this.errorMsg.split(`
`).reduce((t,e,i)=>t+`
${i?" ":_s.pointerSmall} ${gt.red().italic(e)}`,"")),this.out.write(ks.line+Vt.to(0)+this.outputText))}}var zs=Us;const lt=P,Js=L,{cursor:at,erase:Ws}=D,{style:vt,figures:Gs,clear:Ht,lines:Ks}=I,Zs=/[0-9]/,bt=s=>s!==void 0,Bt=(s,t)=>{let e=Math.pow(10,t);return Math.round(s*e)/e};class qs extends Js{constructor(t={}){super(t),this.transform=vt.render(t.style),this.msg=t.message,this.initial=bt(t.initial)?t.initial:"",this.float=!!t.float,this.round=t.round||2,this.inc=t.increment||1,this.min=bt(t.min)?t.min:-1/0,this.max=bt(t.max)?t.max:1/0,this.errorMsg=t.error||"Please Enter A Valid Value",this.validator=t.validate||(()=>!0),this.color="cyan",this.value="",this.typed="",this.lastHit=0,this.render()}set value(t){!t&&t!==0?(this.placeholder=!0,this.rendered=lt.gray(this.transform.render(`${this.initial}`)),this._value=""):(this.placeholder=!1,this.rendered=this.transform.render(`${Bt(t,this.round)}`),this._value=Bt(t,this.round)),this.fire()}get value(){return this._value}parse(t){return this.float?parseFloat(t):parseInt(t)}valid(t){return t==="-"||t==="."&&this.float||Zs.test(t)}reset(){this.typed="",this.value="",this.fire(),this.render()}exit(){this.abort()}abort(){let t=this.value;this.value=t!==""?t:this.initial,this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let t=await this.validator(this.value);typeof t=="string"&&(this.errorMsg=t,t=!1),this.error=!t}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}let t=this.value;this.value=t!==""?t:this.initial,this.done=!0,this.aborted=!1,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){if(this.typed="",this.value===""&&(this.value=this.min-this.inc),this.value>=this.max)return this.bell();this.value+=this.inc,this.color="cyan",this.fire(),this.render()}down(){if(this.typed="",this.value===""&&(this.value=this.min+this.inc),this.value<=this.min)return this.bell();this.value-=this.inc,this.color="cyan",this.fire(),this.render()}delete(){let t=this.value.toString();if(t.length===0)return this.bell();this.value=this.parse(t=t.slice(0,-1))||"",this.value!==""&&this.value<this.min&&(this.value=this.min),this.color="cyan",this.fire(),this.render()}next(){this.value=this.initial,this.fire(),this.render()}_(t,e){if(!this.valid(t))return this.bell();const i=Date.now();if(i-this.lastHit>1e3&&(this.typed=""),this.typed+=t,this.lastHit=i,this.color="cyan",t===".")return this.fire();this.value=Math.min(this.parse(this.typed),this.max),this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),this.fire(),this.render()}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(at.down(Ks(this.outputError,this.out.columns)-1)+Ht(this.outputError,this.out.columns)),this.out.write(Ht(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[vt.symbol(this.done,this.aborted),lt.bold(this.msg),vt.delimiter(this.done),!this.done||!this.done&&!this.placeholder?lt[this.color]().underline(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((t,e,i)=>t+`
${i?" ":Gs.pointerSmall} ${lt.red().italic(e)}`,"")),this.out.write(Ws.line+at.to(0)+this.outputText+at.save+this.outputError+at.restore))}}var Xs=qs;const E=P,{cursor:Qs}=D,ti=L,{clear:Ut,figures:H,style:zt,wrap:ei,entriesToDisplay:si}=I;let ii=class extends ti{constructor(t={}){super(t),this.msg=t.message,this.cursor=t.cursor||0,this.scrollIndex=t.cursor||0,this.hint=t.hint||"",this.warn=t.warn||"- This option is disabled -",this.minSelected=t.min,this.showMinError=!1,this.maxChoices=t.max,this.instructions=t.instructions,this.optionsPerPage=t.optionsPerPage||10,this.value=t.choices.map((e,i)=>(typeof e=="string"&&(e={title:e,value:i}),{title:e&&(e.title||e.value||e),description:e&&e.description,value:e&&(e.value===void 0?i:e.value),selected:e&&e.selected,disabled:e&&e.disabled})),this.clear=Ut("",this.out.columns),t.overrideRender||this.render()}reset(){this.value.map(t=>!t.selected),this.cursor=0,this.fire(),this.render()}selected(){return this.value.filter(t=>t.selected)}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){const t=this.value.filter(e=>e.selected);this.minSelected&&t.length<this.minSelected?(this.showMinError=!0,this.render()):(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.value.length,this.render()}up(){this.cursor===0?this.cursor=this.value.length-1:this.cursor--,this.render()}down(){this.cursor===this.value.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.value[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(t=>t.selected).length>=this.maxChoices)return this.bell();this.value[this.cursor].selected=!0,this.render()}handleSpaceToggle(){const t=this.value[this.cursor];if(t.selected)t.selected=!1,this.render();else{if(t.disabled||this.value.filter(e=>e.selected).length>=this.maxChoices)return this.bell();t.selected=!0,this.render()}}toggleAll(){if(this.maxChoices!==void 0||this.value[this.cursor].disabled)return this.bell();const t=!this.value[this.cursor].selected;this.value.filter(e=>!e.disabled).forEach(e=>e.selected=t),this.render()}_(t,e){if(t===" ")this.handleSpaceToggle();else if(t==="a")this.toggleAll();else return this.bell()}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${H.arrowUp}/${H.arrowDown}: Highlight option
    ${H.arrowLeft}/${H.arrowRight}/[space]: Toggle selection
`+(this.maxChoices===void 0?`    a: Toggle all
`:"")+"    enter/return: Complete answer":""}renderOption(t,e,i,n){const o=(e.selected?E.green(H.radioOn):H.radioOff)+" "+n+" ";let r,l;return e.disabled?r=t===i?E.gray().underline(e.title):E.strikethrough().gray(e.title):(r=t===i?E.cyan().underline(e.title):e.title,t===i&&e.description&&(l=` - ${e.description}`,(o.length+r.length+l.length>=this.out.columns||e.description.split(/\r?\n/).length>1)&&(l=`
`+ei(e.description,{margin:o.length,width:this.out.columns})))),o+r+E.gray(l||"")}paginateOptions(t){if(t.length===0)return E.red("No matches for this query.");let{startIndex:e,endIndex:i}=si(this.cursor,t.length,this.optionsPerPage),n,o=[];for(let r=e;r<i;r++)r===e&&e>0?n=H.arrowUp:r===i-1&&i<t.length?n=H.arrowDown:n=" ",o.push(this.renderOption(this.cursor,t[r],r,n));return`
`+o.join(`
`)}renderOptions(t){return this.done?"":this.paginateOptions(t)}renderDoneOrInstructions(){if(this.done)return this.value.filter(e=>e.selected).map(e=>e.title).join(", ");const t=[E.gray(this.hint),this.renderInstructions()];return this.value[this.cursor].disabled&&t.push(E.yellow(this.warn)),t.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(Qs.hide),super.render();let t=[zt.symbol(this.done,this.aborted),E.bold(this.msg),zt.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(t+=E.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),t+=this.renderOptions(this.value),this.out.write(this.clear+t),this.clear=Ut(t,this.out.columns)}};var Jt=ii;const it=P,ri=L,{erase:ni,cursor:Wt}=D,{style:yt,clear:Gt,figures:wt,wrap:oi,entriesToDisplay:li}=I,Kt=(s,t)=>s[t]&&(s[t].value||s[t].title||s[t]),ai=(s,t)=>s[t]&&(s[t].title||s[t].value||s[t]),hi=(s,t)=>{const e=s.findIndex(i=>i.value===t||i.title===t);return e>-1?e:void 0};class ui extends ri{constructor(t={}){super(t),this.msg=t.message,this.suggest=t.suggest,this.choices=t.choices,this.initial=typeof t.initial=="number"?t.initial:hi(t.choices,t.initial),this.select=this.initial||t.cursor||0,this.i18n={noMatches:t.noMatches||"no matches found"},this.fallback=t.fallback||this.initial,this.clearFirst=t.clearFirst||!1,this.suggestions=[],this.input="",this.limit=t.limit||10,this.cursor=0,this.transform=yt.render(t.style),this.scale=this.transform.scale,this.render=this.render.bind(this),this.complete=this.complete.bind(this),this.clear=Gt("",this.out.columns),this.complete(this.render),this.render()}set fallback(t){this._fb=Number.isSafeInteger(parseInt(t))?parseInt(t):t}get fallback(){let t;return typeof this._fb=="number"?t=this.choices[this._fb]:typeof this._fb=="string"&&(t={title:this._fb}),t||this._fb||{title:this.i18n.noMatches}}moveSelect(t){this.select=t,this.suggestions.length>0?this.value=Kt(this.suggestions,t):this.value=this.fallback.value,this.fire()}async complete(t){const e=this.completing=this.suggest(this.input,this.choices),i=await e;if(this.completing!==e)return;this.suggestions=i.map((o,r,l)=>({title:ai(l,r),value:Kt(l,r),description:o.description})),this.completing=!1;const n=Math.max(i.length-1,0);this.moveSelect(Math.min(n,this.select)),t&&t()}reset(){this.input="",this.complete(()=>{this.moveSelect(this.initial!==void 0?this.initial:0),this.render()}),this.render()}exit(){this.clearFirst&&this.input.length>0?this.reset():(this.done=this.exited=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}abort(){this.done=this.aborted=!0,this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(t,e){let i=this.input.slice(0,this.cursor),n=this.input.slice(this.cursor);this.input=`${i}${t}${n}`,this.cursor=i.length+1,this.complete(this.render),this.render()}delete(){if(this.cursor===0)return this.bell();let t=this.input.slice(0,this.cursor-1),e=this.input.slice(this.cursor);this.input=`${t}${e}`,this.complete(this.render),this.cursor=this.cursor-1,this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();let t=this.input.slice(0,this.cursor),e=this.input.slice(this.cursor+1);this.input=`${t}${e}`,this.complete(this.render),this.render()}first(){this.moveSelect(0),this.render()}last(){this.moveSelect(this.suggestions.length-1),this.render()}up(){this.select===0?this.moveSelect(this.suggestions.length-1):this.moveSelect(this.select-1),this.render()}down(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}next(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}nextPage(){this.moveSelect(Math.min(this.select+this.limit,this.suggestions.length-1)),this.render()}prevPage(){this.moveSelect(Math.max(this.select-this.limit,0)),this.render()}left(){if(this.cursor<=0)return this.bell();this.cursor=this.cursor-1,this.render()}right(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();this.cursor=this.cursor+1,this.render()}renderOption(t,e,i,n){let o,r=i?wt.arrowUp:n?wt.arrowDown:" ",l=e?it.cyan().underline(t.title):t.title;return r=(e?it.cyan(wt.pointer)+" ":"  ")+r,t.description&&(o=` - ${t.description}`,(r.length+l.length+o.length>=this.out.columns||t.description.split(/\r?\n/).length>1)&&(o=`
`+oi(t.description,{margin:3,width:this.out.columns}))),r+" "+l+it.gray(o||"")}render(){if(this.closed)return;this.firstRender?this.out.write(Wt.hide):this.out.write(Gt(this.outputText,this.out.columns)),super.render();let{startIndex:t,endIndex:e}=li(this.select,this.choices.length,this.limit);if(this.outputText=[yt.symbol(this.done,this.aborted,this.exited),it.bold(this.msg),yt.delimiter(this.completing),this.done&&this.suggestions[this.select]?this.suggestions[this.select].title:this.rendered=this.transform.render(this.input)].join(" "),!this.done){const i=this.suggestions.slice(t,e).map((n,o)=>this.renderOption(n,this.select===o+t,o===0&&t>0,o+t===e-1&&e<this.choices.length)).join(`
`);this.outputText+=`
`+(i||it.gray(this.fallback.title))}this.out.write(ni.line+Wt.to(0)+this.outputText)}}var ci=ui;const F=P,{cursor:di}=D,fi=Jt,{clear:Zt,style:qt,figures:q}=I;class pi extends fi{constructor(t={}){t.overrideRender=!0,super(t),this.inputValue="",this.clear=Zt("",this.out.columns),this.filteredOptions=this.value,this.render()}last(){this.cursor=this.filteredOptions.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.filteredOptions.length,this.render()}up(){this.cursor===0?this.cursor=this.filteredOptions.length-1:this.cursor--,this.render()}down(){this.cursor===this.filteredOptions.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.filteredOptions[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(t=>t.selected).length>=this.maxChoices)return this.bell();this.filteredOptions[this.cursor].selected=!0,this.render()}delete(){this.inputValue.length&&(this.inputValue=this.inputValue.substr(0,this.inputValue.length-1),this.updateFilteredOptions())}updateFilteredOptions(){const t=this.filteredOptions[this.cursor];this.filteredOptions=this.value.filter(i=>this.inputValue?!!(typeof i.title=="string"&&i.title.toLowerCase().includes(this.inputValue.toLowerCase())||typeof i.value=="string"&&i.value.toLowerCase().includes(this.inputValue.toLowerCase())):!0);const e=this.filteredOptions.findIndex(i=>i===t);this.cursor=e<0?0:e,this.render()}handleSpaceToggle(){const t=this.filteredOptions[this.cursor];if(t.selected)t.selected=!1,this.render();else{if(t.disabled||this.value.filter(e=>e.selected).length>=this.maxChoices)return this.bell();t.selected=!0,this.render()}}handleInputChange(t){this.inputValue=this.inputValue+t,this.updateFilteredOptions()}_(t,e){t===" "?this.handleSpaceToggle():this.handleInputChange(t)}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${q.arrowUp}/${q.arrowDown}: Highlight option
    ${q.arrowLeft}/${q.arrowRight}/[space]: Toggle selection
    [a,b,c]/delete: Filter choices
    enter/return: Complete answer
`:""}renderCurrentInput(){return`
Filtered results for: ${this.inputValue?this.inputValue:F.gray("Enter something to filter")}
`}renderOption(t,e,i){let n;return e.disabled?n=t===i?F.gray().underline(e.title):F.strikethrough().gray(e.title):n=t===i?F.cyan().underline(e.title):e.title,(e.selected?F.green(q.radioOn):q.radioOff)+"  "+n}renderDoneOrInstructions(){if(this.done)return this.value.filter(e=>e.selected).map(e=>e.title).join(", ");const t=[F.gray(this.hint),this.renderInstructions(),this.renderCurrentInput()];return this.filteredOptions.length&&this.filteredOptions[this.cursor].disabled&&t.push(F.yellow(this.warn)),t.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(di.hide),super.render();let t=[qt.symbol(this.done,this.aborted),F.bold(this.msg),qt.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(t+=F.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),t+=this.renderOptions(this.filteredOptions),this.out.write(this.clear+t),this.clear=Zt(t,this.out.columns)}}var mi=pi;const Xt=P,gi=L,{style:Qt,clear:vi}=I,{erase:bi,cursor:te}=D;class yi extends gi{constructor(t={}){super(t),this.msg=t.message,this.value=t.initial,this.initialValue=!!t.initial,this.yesMsg=t.yes||"yes",this.yesOption=t.yesOption||"(Y/n)",this.noMsg=t.no||"no",this.noOption=t.noOption||"(y/N)",this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.value=this.value||!1,this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(t,e){return t.toLowerCase()==="y"?(this.value=!0,this.submit()):t.toLowerCase()==="n"?(this.value=!1,this.submit()):this.bell()}render(){this.closed||(this.firstRender?this.out.write(te.hide):this.out.write(vi(this.outputText,this.out.columns)),super.render(),this.outputText=[Qt.symbol(this.done,this.aborted),Xt.bold(this.msg),Qt.delimiter(this.done),this.done?this.value?this.yesMsg:this.noMsg:Xt.gray(this.initialValue?this.yesOption:this.noOption)].join(" "),this.out.write(bi.line+te.to(0)+this.outputText))}}var wi=yi,$i={TextPrompt:We,SelectPrompt:Qe,TogglePrompt:rs,DatePrompt:zs,NumberPrompt:Xs,MultiselectPrompt:Jt,AutocompletePrompt:ci,AutocompleteMultiselectPrompt:mi,ConfirmPrompt:wi};(function(s){const t=s,e=$i,i=r=>r;function n(r,l,c={}){return new Promise((d,_)=>{const g=new e[r](l),a=c.onAbort||i,x=c.onSubmit||i,p=c.onExit||i;g.on("state",l.onState||i),g.on("submit",T=>d(x(T))),g.on("exit",T=>d(p(T))),g.on("abort",T=>_(a(T)))})}t.text=r=>n("TextPrompt",r),t.password=r=>(r.style="password",t.text(r)),t.invisible=r=>(r.style="invisible",t.text(r)),t.number=r=>n("NumberPrompt",r),t.date=r=>n("DatePrompt",r),t.confirm=r=>n("ConfirmPrompt",r),t.list=r=>{const l=r.separator||",";return n("TextPrompt",r,{onSubmit:c=>c.split(l).map(d=>d.trim())})},t.toggle=r=>n("TogglePrompt",r),t.select=r=>n("SelectPrompt",r),t.multiselect=r=>{r.choices=[].concat(r.choices||[]);const l=c=>c.filter(d=>d.selected).map(d=>d.value);return n("MultiselectPrompt",r,{onAbort:l,onSubmit:l})},t.autocompleteMultiselect=r=>{r.choices=[].concat(r.choices||[]);const l=c=>c.filter(d=>d.selected).map(d=>d.value);return n("AutocompleteMultiselectPrompt",r,{onAbort:l,onSubmit:l})};const o=(r,l)=>Promise.resolve(l.filter(c=>c.title.slice(0,r.length).toLowerCase()===r.toLowerCase()));t.autocomplete=r=>(r.suggest=r.suggest||o,r.choices=[].concat(r.choices||[]),n("AutocompletePrompt",r))})(Pt);const $t=Pt,Si=["suggest","format","onState","validate","onRender","type"],ee=()=>{};async function B(s=[],{onSubmit:t=ee,onCancel:e=ee}={}){const i={},n=B._override||{};s=[].concat(s);let o,r,l,c,d,_;const g=async(a,x,p=!1)=>{if(!(!p&&a.validate&&a.validate(x)!==!0))return a.format?await a.format(x,i):x};for(r of s)if({name:c,type:d}=r,typeof d=="function"&&(d=await d(o,{...i},r),r.type=d),!!d){for(let a in r){if(Si.includes(a))continue;let x=r[a];r[a]=typeof x=="function"?await x(o,{...i},_):x}if(_=r,typeof r.message!="string")throw new Error("prompt message is required");if({name:c,type:d}=r,$t[d]===void 0)throw new Error(`prompt type (${d}) is not defined`);if(n[r.name]!==void 0&&(o=await g(r,n[r.name]),o!==void 0)){i[c]=o;continue}try{o=B._injected?xi(B._injected,r.initial):await $t[d](r),i[c]=o=await g(r,o,!0),l=await t(r,o,i)}catch{l=!await e(r,i)}if(l)return i}return i}function xi(s,t){const e=s.shift();if(e instanceof Error)throw e;return e===void 0?t:e}function Mi(s){B._injected=(B._injected||[]).concat(s)}function Oi(s){B._override=Object.assign({},s)}var Ti=Object.assign(B,{prompt:B,prompts:$t,inject:Mi,override:Oi});const se=[{name:"react",display:"React",color:K,variants:[{name:"vitest",display:"Vitest",color:N,variants:[{name:"react-css-vitest",display:"CSS",color:N},{name:"react-chakra-vitest",display:"Chakra UI",color:j},{name:"react-mui-vitest",display:"MUI",color:G},{name:"react-tailwind-vitest",display:"Tailwind",color:Y},{name:"react-emotion-vitest",display:"Emotion",color:V},{name:"react-styledComponents-vitest",display:"Styled-Components",color:K}]},{name:"cypress",display:"Cypress",color:G,variants:[{name:"react-css-cypress",display:"CSS",color:N},{name:"react-chakra-cypress",display:"Chakra UI ",color:j},{name:"react-mui-cypress",display:"MUI",color:G},{name:"react-tailwind-cypress",display:"Tailwind",color:Y},{name:"react-emotion-cypress",display:"Emotion",color:V},{name:"react-styledComponents-cypress",display:"Styled-Components",color:K}]},{name:"vitest&cypress",display:"Vitest & Cypress",color:V,variants:[{name:"react-css-vitest-cypress",display:"CSS",color:N},{name:"react-chakra-vitest-cypress",display:"Chakra UI",color:j},{name:"react-mui-vitest-cypress",display:"MUI",color:G},{name:"react-tailwind-vitest-cypress",display:"Tailwind",color:Y},{name:"react-emotion-vitest-cypress",display:"Emotion",color:V},{name:"react-styledComponents-vitest-cypress",display:"Styled-Components",color:K}]},{name:"none",display:"None",color:j,variants:[{name:"react-css",display:"Only React ",color:K},{name:"react-chakra",display:"Chakra UI",color:j},{name:"react-mui",display:"MUI",color:G},{name:"react-tailwind",display:"Tailwind",color:Y},{name:"react-emotion",display:"Emotion",color:V},{name:"react-styledComponents",display:"Styled-Components",color:K}]}]},{name:"vanilla",display:"Vanilla",color:V,variants:[{name:"vitest",display:"Vitest",color:N,variants:[{name:"vanilla-css-vitest",display:"CSS ",color:N},{name:"vanilla-tailwind-vitest",display:"Tailwind",color:Y}]},{name:"cypress",display:"Cypress",color:G,variants:[{name:"vanilla-css-cypress",display:"CSS",color:N},{name:"vanilla-tailwind-cypress",display:"Tailwind",color:Y}]},{name:"vitest&cypress",display:"Vitest & Cypress",color:V,variants:[{name:"vanilla-css-vitest-cypress",display:"CSS",color:N},{name:"vanilla-tailwind-vitest-cypress",display:"Tailwind",color:Y}]},{name:"none",display:"None",color:j,variants:[{name:"vanilla-css",display:"Only Vanilla",color:V},{name:"vanilla-tailwind",display:"Tailwind ",color:Y}]}]}];function ie(s){return s?.trim().replace(/\/+$/g,"")}function re(s,t){O.statSync(s).isDirectory()?Pi(s,t):O.copyFileSync(s,t)}function ne(s){return/^(?:@[a-z\d\-*~][a-z\d\-*._~]*\/)?[a-z\d\-~][a-z\d\-._~]*$/.test(s)}function Ci(s){return s.trim().toLowerCase().replace(/\s+/g,"-").replace(/^[._]/,"").replace(/[^a-z\d\-~]+/g,"-")}function Pi(s,t){O.mkdirSync(t,{recursive:!0});for(const e of O.readdirSync(s)){const i=C.resolve(s,e),n=C.resolve(t,e);re(i,n)}}function Di(s){const t=O.readdirSync(s);return t.length===0||t.length===1&&t[0]===".git"}function Ii(s){if(!!O.existsSync(s))for(const t of O.readdirSync(s))t!==".git"&&O.rmSync(C.resolve(s,t),{recursive:!0,force:!0})}function Ei(s){if(!s)return;const e=s.split(" ")[0].split("/");return{name:e[0],version:e[1]}}const _i=(s,t)=>{const e=s.split("-"),i=["../templates"];return e.forEach((n,o)=>{if(n==="vitest"&&e[o+1]==="cypress"){i.push("/vitest-cypress");return}i.includes("/vitest-cypress")||i.push(`/${n}`)}),t?i.push("/customTheme/template"):i.push("/template"),i.toString().replaceAll(",","")};function ki(s,t,e,i,n,o,r){s.name=t||e(),i("package.json",JSON.stringify(s,null,2));const l=o==="yarn"?`yarn -> Install dependencies      yarn dev -> Run application in development mode
      Start Developing \u{1F525}
      You can also learn more about this template here -> https://example.es`:`${o} install -> Install dependencies
      ${o} run dev -> Run application in development mode
      Start Developing \u{1F525}
      You can also learn more about this template here -> https://example.es`,c=`
    Done! Now Run:
      ${n!==r?`cd ${C.relative(r,n)} -> Enter in the folder`:""}
      ${l}
  `;console.log(c)}const St=ce(process.argv.slice(2),{string:["_"]}),oe=process.cwd(),le=se.map(({variants:s})=>s.map(({variants:t})=>t.map(({name:e})=>e))).flat(1/0),Ri={_gitignore:".gitignore"},xt="accelerator-project";async function Ai(){const s=ie(St._[0]),t=St.template||St.t;let e=s||xt;const i=()=>e==="."?C.basename(C.resolve()):e;let n;try{n=await Ti([{type:s?null:"text",name:"projectName",message:Q("Project name:"),initial:xt,onState:h=>{e=ie(h.value)||xt}},{type:()=>!O.existsSync(e)||Di(e)?null:"confirm",name:"overwrite",message:()=>`${e==="."?"Current directory":`Target directory "${e}"`} is not empty. Remove existing files and continue?`},{type:(h,{overwrite:v})=>{if(v===!1)throw new Error(`${j("\u2716")} Operation cancelled`);return null},name:"overwriteChecker"},{type:()=>ne(i())?null:"text",name:"packageName",message:Q("Package name:"),initial:()=>Ci(i()),validate:h=>ne(h)||"Invalid package.json name"},{type:t&&le.includes(t)?null:"select",name:"framework",message:typeof t=="string"&&!le.includes(t)?Q(`"${t}" isn't a valid template. Please choose from below: `):Q("What would you like to use?"),initial:0,choices:se.map(h=>{const v=h.color;return{title:v(h.display||h.name),value:h}})},{type:h=>h&&h.variants?"select":null,name:"testing",message:"What do you want to use to test?",choices:h=>h.variants.map(v=>{const w=v.color;return{title:w(v.display||v.name),value:v}})},{type:h=>h&&h.variants?"select":null,name:"variant",message:Q("Select a variant:"),choices:h=>h.variants.map(v=>{const w=v.color;return{title:w(v.display||v.name),value:v.name}})},{type:(h,v)=>v.framework.name==="vanilla"||v.variant.includes("css")?null:"confirm",name:"customTheme",message:"Do you want to use a custom theme?\u{1F3A8}"}],{onCancel:()=>{const h=`${j("\u2716")} Operation cancelled`;throw new Error(h)}})}catch(h){console.log(h.message);return}const{overwrite:o,packageName:r,variant:l,customTheme:c}=n,d=C.join(oe,e);o?Ii(d):O.existsSync(d)||O.mkdirSync(d,{recursive:!0});const _=l||t,g=Ei(process.env.npm_config_user_agent),a=g?g.name:"npm",x=C.resolve(ae(import.meta.url),_i(_,c)),p=(h,v)=>{const w=C.join(d,Ri[h]??h);v?O.writeFileSync(w,v):re(C.join(x,h),w)},T=O.readdirSync(x);for(const h of T.filter(v=>v!=="package.json"))p(h);const M=JSON.parse(O.readFileSync(C.join(x,"package.json"),"utf-8"));ki(M,r,i,p,d,a,oe)}export{Ai as init};
